<form [formGroup]="registerForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data" novalidate class="container mt-4 p-4 border rounded bg-white shadow-sm" style="max-width: 600px;">

  <h4 class="mb-4 text-primary">Register</h4>

  <div class="mb-3">
    <label>Name</label>
    <input formControlName="name" class="form-control" placeholder="Enter name" />
  <div *ngIf="getError('name')" class="text-danger mt-1">{{ getError('name') }}</div>

  </div>

  <div class="mb-3">
    <label>Email</label>
    <input formControlName="email" type="email" class="form-control" placeholder="Enter email" />
  </div>

  <div class="mb-3">
    <label>Password</label>
    <input type="password" formControlName="password" class="form-control" placeholder="Enter password" />
  </div>

  <div class="mb-3">
    <label>Phone</label>
    <input formControlName="phone" class="form-control" placeholder="Enter phone number" />
  </div>

  <div class="mb-3">
    <label>Country</label>
    <select formControlName="country_id" (change)="onCountryChange($event)" class="form-select">
      <option value="">Select Country</option>
      <option *ngFor="let c of countries" [value]="c.id">{{ c.country_name }}</option>
    </select>
  </div>

  <div class="mb-3">
    <label>State</label>
    <select formControlName="state_id" (change)="onStateChange($event)" class="form-select">
      <option value="">Select State</option>
      <option *ngFor="let s of states" [value]="s.id">{{ s.state_name }}</option>
    </select>
  </div>

  <div class="mb-3">
    <label>City</label>
    <select formControlName="city_id" class="form-select">
      <option value="">Select City</option>
      <option *ngFor="let city of cities" [value]="city.id">{{ city.city_name }}</option>
      
    </select>
  </div>

  <div class="mb-3">
    <label>Upload Image (JPG, 75KB)</label>
    <input type="file" (change)="onFileChange($event)" class="form-control" />
    <div *ngIf="imageError" class="text-danger mt-1">{{ imageError }}</div>
  </div>

  <button type="submit" class="btn btn-primary w-100">Register</button>
</form> 





<div class="container mt-5">
  <h2 class="mb-4 text-primary">All Registered Users</h2>

  <div class="text-end mb-3">
    <button (click)="getUsers()" class="btn btn-success">
      <i class="bi bi-eye-fill me-1"></i> Show Data
    </button>
  </div>

  <div *ngIf="users.length > 0" class="table-responsive">
    <table class="table table-bordered table-hover table-striped align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Phone</th>
          <th scope="col">Country</th>
          <th scope="col">State</th>
          <th scope="col">City</th>
          <th scope="col">Image</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users; let i = index">
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.phone }}</td>
          <td>{{ user.country }}</td>
          <td>{{ user.state }}</td>
          <td>{{ user.city }}</td>
          <td>
            <img 
              *ngIf="user.image_path" 
              [src]="'http://localhost/codeigniter/' + user.image_path"
              alt="User Image"
              class="img-thumbnail rounded shadow-sm"
              width="80"
              height="80"
            />
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="users.length === 0" class="alert alert-warning text-center mt-4">
    No users found. Click "Show Data" to load users.
  </div>
</div>
